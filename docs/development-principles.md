# Основные принципы разработки

## 1. Единый источник правды (Single Source of Truth)

- Конфигурация каждого модуля должна быть определена в одном месте
- Все остальные части приложения должны импортировать эту конфигурацию
- Примеры:
  ```typescript
  // ✅ Правильно: Единая конфигурация
  import { createI18nServer } from 'next-intl/server';
  
  export const i18nConfig = createI18nServer({
    locales: ['en', 'ru'],
    defaultLocale: 'ru',
    messages: async (locale) => {
      return (await import(`@/messages/${locale}.json`)).default;
    }
  });
  ```

## 2. Пошаговая разработка (Step-by-Step Development)

1. **Анализ текущего состояния**:
   - Изучить существующий код
   - Понять текущую архитектуру Server/Client Components
   - Определить зависимости

2. **Планирование изменений**:
   - Составить список необходимых изменений
   - Разбить изменения на минимальные шаги
   - Определить что будет Server Component, а что Client

3. **Внедрение изменений**:
   - Вносить изменения последовательно
   - Проверять каждый шаг
   - Фиксировать изменения в git после каждого рабочего шага

## 3. Принцип "Не навреди" (Do No Harm)

1. **Перед внесением изменений**:
   - Создать новую ветку
   - Сохранить текущее состояние
   - Убедиться в наличии возможности отката

2. **При внесении изменений**:
   - Изменять минимально необходимый код
   - Проверять влияние на существующую функциональность
   - Следовать принципу наименьшего удивления

3. **После внесения изменений**:
   - Проверить все затронутые части
   - Запустить тесты
   - Убедиться в отсутствии регрессий

## 4. Работа с Server Components

1. **Анализ компонента**:
   ```typescript
   // ✅ Правильно: Server Component по умолчанию
   export default async function ProjectsPage() {
     const projects = await prisma.project.findMany();
     return <ProjectsList projects={projects} />;
   }
   ```

2. **Внесение изменений**:
   ```typescript
   // ✅ Правильно: Server Action
   export async function createProject(data: ProjectCreateInput) {
     const project = await prisma.project.create({ data });
     revalidatePath('/projects');
     return project;
   }
   ```

## 5. Работа с HeroUI

1. **Использование компонентов**:
   ```typescript
   import { Card, Button } from '@heroui/react';
   
   // ✅ Правильно: Базовое использование
   export function ProjectCard({ project }) {
     return (
       <Card>
         <Card.Header>{project.title}</Card.Header>
         <Card.Body>{project.description}</Card.Body>
         <Card.Footer>
           <Button variant="primary">Details</Button>
         </Card.Footer>
       </Card>
     );
   }
   ```

2. **Кастомизация**:
   ```typescript
   // ✅ Правильно: Использование Tailwind с HeroUI
   <Card className="hover:shadow-lg transition-shadow">
     {/* Контент */}
   </Card>
   ```

## 6. Процесс внесения изменений

1. **Подготовка**:
   ```bash
   # Создать новую ветку
   git checkout -b feature/new-feature
   ```

2. **Разработка**:
   ```bash
   # Внести минимальные изменения
   git add .
   git commit -m "feat: add specific change"
   ```

3. **Проверка**:
   ```bash
   # Запустить все проверки
   yarn validate
   ```

## 7. Чеклист перед внесением изменений

1. **Анализ**:
   - [ ] Изучена текущая реализация
   - [ ] Определено что будет Server/Client Component
   - [ ] Определены потенциальные риски

2. **Планирование**:
   - [ ] Составлен список изменений
   - [ ] Определена последовательность шагов
   - [ ] Подготовлен план отката

3. **Реализация**:
   - [ ] Создана новая ветка
   - [ ] Изменения минимальны и понятны
   - [ ] Сохранена обратная совместимость

4. **Проверка**:
   - [ ] Пройдены все тесты
   - [ ] Проверена работа связанных компонентов
   - [ ] Нет неожиданных побочных эффектов

## 8. Правила коммуникации в команде

1. **При обнаружении проблемы**:
   - Чётко описать проблему
   - Предложить варианты решения
   - Обсудить потенциальные риски

2. **При внесении изменений**:
   - Объяснить необходимость изменений
   - Описать процесс внедрения
   - Указать затронутые компоненты

3. **При возникновении трудностей**:
   - Признать наличие проблемы
   - Попросить помощи у команды
   - Предложить альтернативные решения

## 9. Правила отката изменений

1. **Когда необходим откат**:
   - Обнаружены критические ошибки
   - Нарушена работа важных компонентов
   - Невозможно быстро исправить проблему

2. **Процесс отката**:
   ```bash
   # Вернуться к последней рабочей версии
   git reset --hard HEAD^
   ```

## 10. Принципы рефакторинга

1. **Подготовка к рефакторингу**:
   - Убедиться в наличии тестов
   - Определить объем изменений
   - Согласовать изменения с командой

2. **Процесс рефакторинга**:
   - Делать минимальные изменения
   - Часто коммитить изменения
   - Постоянно проверять работоспособность

3. **После рефакторинга**:
   - Проверить производительность
   - Обновить документацию
   - Убедиться в отсутствии регрессий 